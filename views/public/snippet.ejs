<%- include('../partials/public/header') %>

<article>
  <div class="border-2 border-black dark:border-gray-600 print-hidden">
    <div
      class="flex flex-col sm:flex-row sm:items-baseline sm:justify-between border-b-2 border-black p-4 gap-4 dark:border-gray-600"
    >
      <div>
        <% if (snippet.category_slug) { %>
        <a
          href="/category/<%= snippet.category_slug %>"
          class="border border-black px-3 py-1 text-sm font-bold uppercase hover:bg-yellow-300 dark:border-gray-600 dark:hover:text-black"
        >
          Category: <%= snippet.category_name %>
        </a>
        <% } else { %>
        <p class="text-sm font-bold uppercase">Uncategorized</p>
        <% } %>
      </div>

      <div class="flex flex-wrap items-center gap-2">

        <div class="border border-black px-2 py-1 text-xs font-bold uppercase dark:border-gray-600">
             <span class="text-neutral-700">tags:</span>
        </div>

        <% if(snippet.tags) { %> <% snippet.tags.split(',').forEach(tag => { %> <%
        if(tag.trim()) { %>
        <a
          href="/tag/<%= encodeURIComponent(tag.trim()) %>"
          class="border border-black px-2 py-1 text-xs font-bold hover:bg-yellow-300 dark:border-gray-600 dark:hover:text-black"
        >
          <%= tag.trim() %>
        </a>
        <% } %> <% }) %> <% } %>
      </div>
    </div>

    <div class="p-6 pb-20 relative">
      <h1 class="text-4xl font-extrabold uppercase lg:text-5xl">
        <%= snippet.title %>
      </h1>
      
      <p class="mt-3 text-lg"><%= snippet.description %></p>

      <% if (snippet.reference_url) { %>
      <div class="mt-6">
        <a
          href="<%= snippet.reference_url %>"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-block border-2 border-black bg-white px-4 py-2 font-bold uppercase text-black hover:bg-yellow-300 transition-colors dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-yellow-300 dark:hover:text-black"
        >
          View Reference
        </a>
      </div>
      <% } %>

      <% if (snippet.is_private) { %>
        <div class="absolute bottom-6 left-6 border border-red-600 bg-red-500 text-white px-3 py-1 text-sm font-bold uppercase dark:bg-red-700 dark:border-red-500">
          Private
        </div>
      <% } %>

      <% if (snippet.author_name) { %>
        <div class="absolute bottom-6 right-6 border font-bold border-black px-3 py-1 text-sm hover:bg-yellow-300 uppercase dark:hover:text-black dark:border-gray-600">
          <span class="text-neutral-700">Author:</span>
          <a href="/author/<%= snippet.author_name %>"><%= snippet.author_name %></a>
        </div>
      <% } %>
    </div>
  </div>

  <div class="my-8 space-y-6 text-lg leading-relaxed">
    <div
      class="flex justify-between items-center flex-wrap gap-4 print-hidden"
    >
      <% if (snippet.language_slug) { %>
      <div>
        <h3
          class="inline-block bg-black px-3 py-1 text-xl font-bold uppercase text-yellow-300"
        >
          // Language:
          <a
            href="/language/<%= snippet.language_slug %>"
            class="hover:underline"
          >
            <%= snippet.language_name %>
          </a>
        </h3>
      </div>
      <% } %>

      <div class="flex items-center gap-4">
        <a
          href="/download/<%= urlStyle === 'shortid' && snippet.short_id ? snippet.short_id : snippet.slug %>"
          download
          class="border-2 border-black bg-white px-4 py-2 font-bold uppercase text-black hover:bg-yellow-300 transition-colors dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-yellow-300 dark:hover:text-black"
        >
          Download
        </a>
        <button
          id="print-btn"
          type="button"
          class="border-2 border-black bg-white px-4 py-2 font-bold uppercase text-black hover:bg-yellow-300 transition-colors dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-yellow-300 dark:hover:text-black"
        >
          Print
        </button>
        <button
          id="copy-code-btn"
          type="button"
          class="border-2 border-black bg-white px-4 py-2 font-bold uppercase text-black hover:bg-yellow-300 transition-colors dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-yellow-300 dark:hover:text-black"
        >
          Copy Code
        </button>
        <% if (snippet.short_id) { %>
        <button
          id="share-shortlink-btn"
          type="button"
          data-shortid="<%= snippet.short_id %>"
          class="border-2 border-black bg-white px-4 py-2 font-bold uppercase text-black hover:bg-yellow-300 transition-colors dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-yellow-300 dark:hover:text-black"
        >
          Share
        </button>
        <% } %>
      </div>
    </div>

    <pre
      class="text-base overflow-x-auto p-4 border-2 border-black dark:border-gray-600"
    ><code id="code-content" class="language-<%= snippet.language_slug || 'plaintext' %>"><%- snippet.code %></code></pre>
  </div>
</article>

<%- include('../partials/public/footer') %>

<% const snippetUrl = urlStyle === 'shortid' && snippet.short_id ? snippet.short_id : snippet.slug; %>

<div class="snippet-card border-2 border-black dark:border-gray-600">
  <div
    class="flex flex-col sm:flex-row sm:items-baseline sm:justify-between border-b-2 border-black p-4 gap-4 dark:border-gray-600"
  >
    <div>
      <% if (snippet.category_slug) { %>
      <a
        href="/category/<%= snippet.category_slug %>"
        class="border border-black px-3 py-1 text-sm font-bold uppercase hover:bg-yellow-300 dark:border-gray-600 dark:hover:text-black"
      >
        Category: <%= snippet.category_name %>
      </a>
      <% } else { %>
      <p class="text-sm font-bold uppercase">Uncategorized</p>
      <% } %>
    </div>

    <div class="flex flex-wrap items-center gap-2">

      <div class="border border-black px-2 py-1 text-sm font-bold uppercase dark:border-gray-600 dark:hover:text-white">
        <span class="text-neutral-700">tags:</span>
      </div>

      <% if(snippet.tags) { %> <% snippet.tags.split(',').forEach(tag => { %> <%
      if (tag.trim()) { %>
      <a
        href="/tag/<%= encodeURIComponent(tag.trim()) %>"
        class="border border-black px-2 py-1 text-sm font-bold uppercase hover:bg-yellow-300 dark:hover:text-black dark:border-gray-600"
      >
        <%= tag.trim() %>
      </a>
      <% } %> <% }) %> <% } %>
    </div>
  </div>

  <div class="p-6 pb-16 relative">
    <h3 class="text-3xl font-bold uppercase">
      <a href="/<%= snippetUrl %>" class="hover:bg-yellow-300 dark:hover:text-black">
        <%= snippet.title %>
      </a>
    </h3>
    <p class="mt-3 text-base"><%= snippet.description %></p>
    
    <% if (snippet.author_name) { %>
      <div class="absolute bottom-6 right-6 border border-black px-3 py-1 text-sm hover:bg-yellow-300 font-bold uppercase dark:hover:text-black dark:border-gray-600">
        <span class="text-bold-500">Author:</span>
        <a href="/author/<%= snippet.author_name %>"><%= snippet.author_name %></a>
      </div>
    <% } %>
  </div>

  <div
    class="flex items-center justify-between border-t-2 border-black p-4 dark:border-gray-600"
  >
    <div>
      <% if (snippet.language_slug) { %>
      <a
        href="/language/<%= snippet.language_slug %>"
        class="border border-black px-3 py-1 text-sm font-bold uppercase hover:bg-yellow-300 dark:border-gray-600 dark:hover:text-black"
      >
        Language: <%= snippet.language_name %>
      </a>
      <% } %>
    </div>
    
    <a
      href="/<%= snippetUrl %>"
      class="inline-block border-2 border-black bg-white px-4 py-2 font-bold uppercase text-black hover:bg-yellow-300 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-yellow-300 dark:hover:text-black"
      >View Snippet</a
    >
  </div>
</div>

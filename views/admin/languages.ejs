<%- include('../partials/admin/header') %> 
<%- include('../partials/admin/sidebar') %>

<main class="col-span-1 p-4 sm:p-6 lg:col-span-4 lg:p-8">
  <header class="border-b-2 border-black pb-6 dark:border-gray-600">
    <div>
      <h1 class="text-4xl font-extrabold uppercase">Languages</h1>
      <p class="text-neutral-600 dark:text-neutral-400">
        MANAGE SYNTAX HIGHLIGHTING LANGUAGES
      </p>
    </div>
  </header>

  <section class="mt-8">
    <h3
      class="mb-4 inline-block bg-black px-4 py-2 text-3xl font-bold uppercase text-yellow-300"
    >
      // New Language
    </h3>
    <form
      action="/admin/languages/add"
      method="POST"
      class="mb-8 flex gap-2 border-2 border-black p-6 dark:border-gray-600"
    >
      <input
        type="text"
        name="name"
        id="name"
        required
        class="w-full border-2 border-black bg-white p-3 text-base focus:outline-none focus:ring-4 focus:ring-yellow-300 dark:bg-gray-800 dark:border-gray-600 dark:text-white"
        placeholder="New language name..."
      />
      <button
        type="submit"
        class="border-2 border-black bg-yellow-300 px-6 py-2 font-bold uppercase text-black"
      >
        Add
      </button>
    </form>
  </section>

  <section class="mt-8">
    <h3
      class="mb-4 inline-block bg-black px-4 py-2 text-3xl font-bold uppercase text-yellow-300"
    >
      // Existing Languages
    </h3>
    <div class="overflow-x-auto border-2 border-black dark:border-gray-600">
      <table class="w-full text-left">
        <thead class="bg-black text-yellow-300">
          <tr>
            <th class="p-4 uppercase">Language Name</th>
            <th class="p-4 uppercase">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% languages.forEach(language => { %>
          <tr
            class="border-b-2 border-black bg-white even:bg-neutral-50 inline-editable-item dark:bg-gray-800 dark:even:bg-gray-700 dark:border-gray-600"
          >
            <td class="p-4">
              <div class="item-display">
                <span class="font-bold"><%= language.name %></span>
              </div>
              <div class="item-edit" style="display: none">
                <form
                  action="/admin/languages/update/<%= language.id %>"
                  method="POST"
                  class="flex items-center gap-x-2"
                >
                  <input
                    type="text"
                    name="name"
                    value="<%= language.name %>"
                    required
                    class="block w-full border-2 border-black p-2 focus:outline-none focus:ring-4 focus:ring-yellow-300 dark:bg-gray-800 dark:border-gray-600 dark:text-white"
                  />
                  <button
                    type="submit"
                    class="border-2 border-black bg-yellow-300 px-4 py-2 text-sm font-bold uppercase text-black"
                  >
                    Save
                  </button>
                  <button
                    type="button"
                    class="cancel-edit-btn border-2 border-black bg-white px-4 py-2 text-sm font-bold uppercase dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"
                  >
                    Cancel
                  </button>
                </form>
              </div>
            </td>
            <td class="p-4">
              <div class="item-display flex items-center space-x-4">
                <a
                  href="/language/<%= language.slug %>"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="font-bold uppercase underline"
                  >View</a
                >
                <button
                  type="button"
                  class="edit-item-btn font-bold uppercase underline"
                >
                  Edit
                </button>
                <div class="delete-container">
                  <button
                    type="button"
                    class="delete-btn font-bold uppercase text-red-600"
                  >
                    Delete
                  </button>
                  <div class="delete-confirm" style="display: none">
                    <form
                      action="/admin/languages/delete/<%= language.id %>"
                      method="POST"
                      class="inline"
                    >
                      <button type="submit" class="font-bold text-red-600">
                        YES
                      </button>
                    </form>
                    <button
                      type="button"
                      class="cancel-delete-btn ml-2 font-bold"
                    >
                      NO
                    </button>
                  </div>
                </div>
              </div>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </section>
</main>

<%- include('../partials/admin/footer') %>
